window["viz_UKZ0aIO1"]= {"name":"UKZ0aIO1","displayName":"Chart 5","dependencies":["tuyadat_1"],"transformName":"tuyadat_1_eWA6vRQ4","options":{"marker":"line","x":{"name":"@timestamp.x","validName":"`@timestamp.x`","type":"Date","isNumeric":false,"isDate":true,"func":"dayofyear","label":"c1","validLabel":"c1"},"y":{"name":"uuid","validName":"uuid","isNumeric":false,"isDate":false,"type":"character","func":"countd","label":"c2","validLabel":"c2"},"size":null,"color":{"name":"first_date","validName":"first_date","type":"Date","isNumeric":false,"isDate":true,"func":"dayofyear","label":"c3","validLabel":"c3"},"text":"","shape":"","facetcolumn":"","facetrow":"","barstyle":"stack","barsort":"off","label":"","colh":"","rowh":"","meas":"","scatterText":"","randomSeed":"1","treatNAAsZero":"on","mapmode":"USA-states","columns":[{"name":"uuid","type":"character","escapedName":"uuid","isNumeric":false,"isDate":false},{"name":"@timestamp.x","type":"Date","escapedName":"`@timestamp.x`","isNumeric":false,"isDate":true},{"name":"event.x","type":"character","escapedName":"event.x","isNumeric":false,"isDate":false},{"name":"first_date","type":"Date","escapedName":"first_date","isNumeric":false,"isDate":true},{"name":"last_date","type":"Date","escapedName":"last_date","isNumeric":false,"isDate":true},{"name":"age","type":"difftime","escapedName":"age","isNumeric":false,"isDate":false},{"name":"BUY.date","type":"Date","escapedName":"BUY.date","isNumeric":false,"isDate":true},{"name":"BUY","type":"character","escapedName":"BUY","isNumeric":false,"isDate":false}],"data":{"c3":["2020-01-20","2020-01-21","2020-01-22","2020-01-23","2020-01-24","2020-01-25","2020-01-26","2020-01-27","2020-01-28","2020-01-29","2020-01-20","2020-01-20","2020-01-20","2020-01-20","2020-01-20","2020-01-20","2020-01-20","2020-01-20","2020-01-20","2020-01-20","2020-01-21","2020-01-21","2020-01-21","2020-01-21","2020-01-21","2020-01-21","2020-01-21","2020-01-21","2020-01-21","2020-01-22","2020-01-22","2020-01-22","2020-01-22","2020-01-22","2020-01-22","2020-01-22","2020-01-22","2020-01-23","2020-01-23","2020-01-23","2020-01-23","2020-01-23","2020-01-23","2020-01-23","2020-01-24","2020-01-24","2020-01-24","2020-01-24","2020-01-24","2020-01-24","2020-01-25","2020-01-25","2020-01-25","2020-01-25","2020-01-25","2020-01-26","2020-01-26","2020-01-26","2020-01-26","2020-01-27","2020-01-27","2020-01-27","2020-01-28","2020-01-28","2020-01-29"],"c1":[20,20,20,20,20,20,20,20,20,20,20,21,22,23,24,25,26,27,28,29,21,22,23,24,25,26,27,28,29,22,23,24,25,26,27,28,29,23,24,25,26,27,28,29,24,25,26,27,28,29,25,26,27,28,29,26,27,28,29,27,28,29,28,29,29],"c2":[null,null,null,null,null,null,null,null,null,null,171,88,81,77,66,72,72,70,63,33,352,136,139,100,120,115,121,134,82,202,71,54,67,60,67,64,35,113,28,28,36,34,29,16,73,19,16,17,17,7,89,20,26,21,10,97,21,19,10,71,16,8,58,8,36],"..is.order.row":["TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},"query":"try(jsonlite::toJSON({.dqdf <- `tuyadat_1_eWA6vRQ4`;\n.dqdf %>% \ndplyr::ungroup() %>% \ndplyr::mutate_if(bit64::is.integer64, as.numeric) %>% \nmutate_if(lubridate::is.period, lubridate::as.difftime) %>% \nmutate_if(lubridate::is.interval, lubridate::as.difftime) %>% \ndplyr::mutate(c3=(function(x) {\n  if (!is.factor(x)) {\n    x <- factor(x) \n  }; \n  if (length(unique(x)) <= 20) {\n    return (x); \n  };\n  return (\n    forcats::fct_lump(\n      x, \n      n=20,\n      ties.method =\"first\",\n      other_level = \"Others\"\n    )\n  )\n})(lubridate::yday(first_date)),c1=lubridate::yday(`@timestamp.x`),c2=uuid) %>% \ndplyr::mutate(c3 =  dplyr::recode(c3, `20` = \"2020-01-20\", `21` = \"2020-01-21\", `22` = \"2020-01-22\", `23` = \"2020-01-23\", `24` = \"2020-01-24\", `25` = \"2020-01-25\", `26` = \"2020-01-26\", `27` = \"2020-01-27\", `28` = \"2020-01-28\", `29` = \"2020-01-29\")) %>% \ndplyr::filter(!is.na(c3) & !is.na(c1)) %>% \ndplyr::group_by (c3,c1) %>% \ndplyr::summarise(c2=n_distinct(c2)) %>% \ndplyr::ungroup() %>% \ndplyr::arrange(c3,c1) %>% \n(function(df) {   `_tam_setCurrentVizDataCache`(df, type=\"groupby\", colnames=c(\"c3\"=\"first_date\", \"c1\"=\"@timestamp.x\", \"c2\"=\"uuid\"))\n  return (df);}) %>% \n  `_tam_add_order_rows`( target=c(\"c3\"), \"c3\", \"c1\") %>% \n `_tam_convertLogicalToCharacter`()\n}\n, na=\"null\" , dataframe=\"columns\", digits=10))","pieHole":"55","pivotShowTotals":"on","pivotShowRowTotals":"on","_desktopVersion":"5.4.2.2","displayName":"Chart 5","sampleDataSize":0,"sortTarget":null,"yUse2ndAxis":null,"colorBucketGroup":"all","xBucketGroup":"all","yBucketGroup":null,"y0":null,"pivotColor":"none","height":500,"width":800,"mapZoomStatus":null,"yTrendLine":"none","y1TrendLine":"none","y2TrendLine":"none","y3TrendLine":"none","y4TrendLine":"none","y5TrendLine":"none","y6TrendLine":"none","y7TrendLine":"none","y8TrendLine":"none","y9TrendLine":"none","y10TrendLine":"none","y11TrendLine":"none","y12TrendLine":"none","y13TrendLine":"none","y14TrendLine":"none","y15TrendLine":"none","y16TrendLine":"none","y17TrendLine":"none","y18TrendLine":"none","y19TrendLine":"none","y20TrendLine":"none","y21TrendLine":"none","y22TrendLine":"none","y23TrendLine":"none","y24TrendLine":"none","y25TrendLine":"none","y26TrendLine":"none","y27TrendLine":"none","y28TrendLine":"none","y29TrendLine":"none","yReflineType":"none","_canvasWidth":951,"_canvasHeight":766,"colorbucket":null,"xEnableOtherGroup":null,"xNumGroupsToPreserve":null,"xShowOtherGroup":null,"xOtherGroupLabel":null,"xOtherGroupValues":null,"yNumGroupsToPreserve":null,"yShowOtherGroup":null,"yOtherGroupLabel":null,"xReflineType":"none","yEnableOtherGroup":null,"yOtherGroupValues":null,"colorRecode":{"20":"2020-01-20","21":"2020-01-21","22":"2020-01-22","23":"2020-01-23","24":"2020-01-24","25":"2020-01-25","26":"2020-01-26","27":"2020-01-27","28":"2020-01-28","29":"2020-01-29"},"xAxisNumberFormatting":"number","maxNUniqOnX":"","numDecimalDigits":"","useThousandSeparator":"on","yValueOnPlotFontSize":"","xAxisShowRangeSlider":"off","legendFontSize":"","legendShowFuncName":"on","title":"每日登录设备数Vintage","titleFontSize":"","xAxisShowTitle":"on","xAxisTitle":"日期","xAxisTitleFontSize":"","xAxisCurrencySymbol":"","xAxisNumDecimalDigits":"","xAxisRange":"","xAxisTickStep":"","xAxisTickFontSize":"","yAxisShowTitle":"on","yAxisTitle":"设备数","yAxisTitleFontSize":"","yAxisCurrencySymbol":"","y1AxisNumDecimalDigits":"","yAxisRange":"","yAxisTickStep":"","yAxisIncludeZero":"on","yAxisTickFontSize":"","y2AxisShowTitle":"on","y2AxisTitle":"","y2AxisTitleFontSize":"","y2AxisCurrencySymbol":"","y2AxisNumDecimalDigits":"","y2AxisRange":"","y2AxisTickStep":"","y2AxisIncludeZero":"on","y2AxisTickFontSize":"","axisAutoMargin":"on","marginTop":"","marginBottom":"","marginLeft":"","marginRight":"","yValueOnPlot":"none"},"timestamp":"2020-01-30T12:36:28.083Z","updatedBy":"","thumbnail":null,"snapshot":null,"publicTitle":"","publicDescription":"","publicDataSourceURL":"","withSteps":false,"privateShare":true,"sharedURL":"","previousSharedURL":"","sharedDate":null,"publishSizeOption":null,"insightMetaInfo":{"version":1,"url":null,"isPrivate":false,"thumbnail":null,"title":"","description":"","learnMoreUrl":null,"exampleUrl":null,"sharedFileTypes":[],"withSteps":false,"dataSourceURL":""},"preprocessor":"","_tags":null,"filterCommand":{"name":"filter","conditions":[]},"variables":[],"tabIndex":5,"_isDirty":false,"_createdVersion":"5.4.2.2","annotation":"","_tempAnnotation":"","_tempDisplayName":"","_thumbnailFileName":""}